name: Pull Request

on: pull_request

jobs:
  build:

    runs-on: ubuntu-latest

    strategy:
      matrix:
        node-version: [8.x, 10.x, 12.x]

    steps:
    - uses: actions/checkout@v1
    - name: Use Node.js ${{ matrix.node-version }}
      uses: actions/setup-node@v1
      with:
        node-version: ${{ matrix.node-version }}
    - name: npm ci, build, and test
      run: |
        npm ci
        npm run release
        npm test
      env:
        CI: true
    - name: Create Pull Request
      uses: peter-evans/create-pull-request@v1.5.2
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        COMMIT_MESSAGE: Release Build
        COMMIT_AUTHOR_EMAIL: tiliavir@gmail.com
        COMMIT_AUTHOR_NAME: Markus Lindenmann
        PULL_REQUEST_TITLE: Release Build
        PULL_REQUEST_BODY: This is an auto-generated PR with release build changes.
        PULL_REQUEST_LABELS: release
        PULL_REQUEST_REVIEWERS: tiliavir
        PULL_REQUEST_BRANCH: ${{ steps.vars.outputs.branch-name }}
        BRANCH_SUFFIX: none
